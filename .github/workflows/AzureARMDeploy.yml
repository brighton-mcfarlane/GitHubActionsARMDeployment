on: [push]

name: AzureARMDeploy

workflow-dispatch:

jobs:

    deploy:
      runs-on: ubuntu-latest
      steps:
        - name: Login to Azure
        - uses: azure/login@v1
          with:
            creds: ${{ secrets.AZURE_CREDENTIALS }}

        - name: Checkout source code
          uses: actions/checkout@v2

        - name: Deploy ARM Template
          uses: azure/CLI@v1
          with:
            azcliversion: 2.0.72
            inlineScript: |
              az deployment group create \
              --name AzureDeployDeployment \
              -g AzureChallengeGitHubActionsRG \
              --template-file ./armtemplates/azuredeploy.json 

